!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=6)}([function(e,t){e.exports='<div class="m-entitygeometry-container">\r\n    <div id="m-button-entitypolygon-vertical" class="m-control button">\r\n        \x3c!--<button id="m-addtosandbox-button" class="g-cartografia-capas" title="Añadir geometrías a la capa de trabajo"></button> --\x3e\r\n        <button id="m-addgeometry-button" class="icon-edition-import-button" title="{{translations.import_btn}}"></button>\r\n        <div id="m-selectmenu-button" class="dropdown-edition">\r\n            <button id="m-select-button" class="g-cartografia-flecha" title="{{translations.select_btn}}"></button>\r\n            <div id="myDropdown" class="dropdown-edition-content">\r\n                <div><button id="m-selectclick-button" class="icon-edition-select-click" title="{{translations.select_click}}"></button></div>\r\n                <div><button id="m-selectline-button" class="icon-edition-select-line" title="{{translations.select_line}}"></button></div>\r\n                <div><button id="m-selectarea-button" class="icon-edition-select-area" title="{{translations.select_area}}"></button></div>\r\n                <div><button id="m-selectall-button" class="icon-edition-select-all" title="{{translations.select_all}}"></button></div>\r\n                <div><button id="m-deselectall-button" class="icon-edition-deselect-all" title="{{translations.deselect_all}}"></button></div>\r\n            </div>\r\n        </div>\r\n        <div id="m-zoommenu-button" class="dropdown-edition">\r\n            <button id="m-zoom-button" class="g-cartografia-zoom" title="{{translations.zoom}}"></button>\r\n            <div id="myDropdown-edition" class="dropdown-edition-content">\r\n                <div><button id="m-zoomsandbox-button" class="icon-edition-zoom-sandbox" title="{{translations.zoom_sandbox}}"></button></div>\r\n                <div><button id="m-zoomselect-button" class="icon-edition-zoom-selection" title="{{translations.zoom_selection}}"></button></div>\r\n            </div>\r\n        </div>\r\n        <button id="m-draw-button" class="g-cartografia-editar" title="{{translations.geometry_draw}}"></button>\r\n        <button id="m-snapping-button" class="icon-edition-snapping" title="{{translations.snapping}}"></button>\r\n        <button id="m-modify-button" class="icon-edition-modify-polygon" title="{{translations.modify_polygon}}"></button>\r\n        <button id="m-splitpolygon-button" class="g-cartografia-linea" title="{{translations.geometry_divide}}"></button>\r\n        <button id="m-unir-button" class="icon-edition-union" title="{{translations.union}}"></button>\r\n        <button id="m-vaciado-button" class="icon-edition-empty-polygon" title="{{translations.empty_polygon}}"></button>\r\n        <button id="m-intersect-button" class="icon-edition-intersection" title="{{translations.intersection}}"></button>\r\n        <button id="m-removefromsandbox-button" class="icon-edition-delete-selected" title="{{translations.delete_selected}}"></button>\r\n    </div>\r\n</div>'},function(e,t){e.exports='<div class="m-dialog {{severity}}">\r\n   <div class="m-modal">\r\n      <div class="m-content">\r\n         <div class="m-title">\r\n            <i class="m-icon"></i>\r\n            <span>{{{title}}}</span>\r\n         </div>\r\n         <div class="m-message">{{{message}}}\r\n            {{#if layers}}\r\n            <br>\r\n            <select class="m-layer-selection">\r\n               {{#each layers}}\r\n               <option value="{{{this.name}}}">{{this.name}}</option>\r\n               {{/each}}\r\n             </select> \r\n             {{/if}}\r\n         </div>\r\n         <div id="m-edition-dialog-button-aceptar" class="m-edition-dialog-button">\r\n            <button>{{translations.accept_btn}}</button>\r\n         </div>\r\n         <div id="m-edition-dialog-button-cancelar" class="m-edition-dialog-button">\r\n            <button>{{translations.cancel_btn}}</button>\r\n         </div>\r\n      </div>\r\n   </div>\r\n</div>'},function(e){e.exports=JSON.parse('{"tooltip":"Edition Tools","import_btn":"Import geometry from vector layer","select_btn":"Select","select_click":"Select by click","select_line":"Select by line","select_area":"Select by area","select_all":"Select all geometry","deselect_all":"Deselect all geometries","zoom":"Zoom","zoom_sandbox":"Zoom to working layer","zoom_selection":"Zoom to selected geometries","geometry_draw":"Draw geometry","snapping":"Activate snapping","modify_polygon":"Modify geometry","geometry_divide":"Divide geometry","union":"Group geometries","empty_polygon":"Empty","intersection":"Geometry intersect","delete_selected":"Remove selected geometries from working layer","accept_btn":"Accept","cancel_btn":"Cancel","dialog_removeFeatures":"The selected geometries will be removed. Do you want to continue?","dialog_removeFeatures_title":"Remove geomtries","dialog_removeFeatures_noGeometry":"No geometries selected","snapping_disable":"Deactivate snapping","dialog_noGeometry":"There are no geometries in the working layer","dialog_noGeometry_selected":"No geometries selected in working","dialog_noValidGeometry":"The geometry is not valid","dialog_atLeast_oneSelected":"You must select at least one geometry","dialog_union":"The selected geometries will be grouped Do you want to continue?","dialog_union_title":"Group geometries","dialog_atLeast_twoSelected":"You must select at least two geometry","dialog_intersect_title":"Intersection","dialog_empty_title":"Empty","dialog_add_geometry":"The geometries of the selected layer will be added. Do you want to continue?","dialog_add_geometry_title":"Copy geometries","dialog_zoom_title":"Zoom to working layer","dialog_zoom_select":"Zoom to selection","dialog_not_found":"Not found: ","dialog_cannot_consult":"The query has not been made"}')},function(e){e.exports=JSON.parse('{"tooltip":"Herramientas de edición","import_btn":"Importar geometría desde capa vectorial","select_btn":"Seleccionar","select_click":"Seleccionar por click","select_line":"Seleccionar por línea","select_area":"Seleccionar por área","select_all":"Seleccionar todas las geometrías","deselect_all":"Deseleccionar todas las geometrías","zoom":"Zoom","zoom_sandbox":"Zoom a la capa de trabajo","zoom_selection":"Zoom a las geometrías seleccionadas","geometry_draw":"Dibujar geometría","snapping":"Activar snapping","modify_polygon":"Modificar geometría","geometry_divide":"Dividir geometría","union":"Unir geometrías","empty_polygon":"Vaciado","intersection":"Intersección de geometrías","delete_selected":"Eliminar geometrías seleccionadas de la capa de trabajo","accept_btn":"Aceptar","cancel_btn":"Cancelar","dialog_removeFeatures":"Se eliminarán las geometrías seleccionadas ¿Desea continuar?","dialog_removeFeatures_title":"Eliminar geometrías","dialog_removeFeatures_noGeometry":"No hay geometrías seleccionadas","snapping_disable":"Desactivar snapping","dialog_noGeometry":"No hay geometrías en la capa de trabajo","dialog_noGeometry_selected":"No hay geometrías seleccionadas en la capa de trabajo","dialog_noValidGeometry":"La geometría no es válida","dialog_atLeast_oneSelected":"Debe seleccionar al menos una geometría","dialog_union":"Se unirán las geometrías seleccionadas ¿Desea continuar?","dialog_union_title":"Unir geometrías","dialog_atLeast_twoSelected":"Debe seleccionar al menos dos geometrías","dialog_intersect_title":"Intersección","dialog_empty_title":"Vaciado","dialog_add_geometry":"Se añadirán las geometrías de la capa seleccionada ¿Desea continuar?","dialog_add_geometry_title":"Copiar geometrías","dialog_zoom_title":"Zoom a la capa de trabajo","dialog_zoom_select":"Zoom a la selección","dialog_not_found":"No se han encontrado ","dialog_cannot_consult":"No se ha podido realizar la consulta"}')},function(e){e.exports=JSON.parse('{"url":{"name":"edition","separator":"*"},"constructor":"M.plugin.Edition","parameters":[],"files":{"ol":{"scripts":["edition.ol.min.js"],"styles":["edition.ol.min.css"]}},"metadata":{"name":"Edition","description":"Edición de geoprocesos","text":"Plugin que permite editar capas existentes en el mapa, o creadas por el propio usuario","version":"1.1.0","date":"Junio, 2020","author":"","org":"Consejería de Agricultura, Ganadería, Pesca y Desarrollo Sostenible de la Junta de Andalucía.","tags":"mapea,plugin","icon":"./facade/assets/icons/icons.svg","centralized":true}}')},function(e,t,n){},function(e,t,n){"use strict";n.r(t);n(5);var o=n(0),r=n.n(o);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=u(e);if(t){var r=u(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return s(this,n)}}function s(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(i,M.impl.Layer);var t,n,o,r=c(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=r.call(this)).base_=e,t.map_=e.facadeMap_,t.ol3Layer_=null,t.isVisible_=!0,t.isModified_=!1,t.sandBoxFeatures_=[],t.sandBoxLayer_=null,t.selectedFeatures_=[],t.deletedFeatures_=[],t.geometry=void 0,t.type_="MultiPolygon",t.addTo(t.map_),t}return t=i,(n=[{key:"addTo",value:function(){this.sandBoxLayer_=new M.layer.Vector,this.sandBoxLayer_.name="editionLayer",this.sandBoxLayer_.setZIndex(M.impl.Map.Z_INDEX[M.layer.type.WFS]+999),this.map_.addLayers(this.sandBoxLayer_),this.ol3Layer_=this.sandBoxLayer_.getImpl().getOL3Layer(),this.ol3Layer_.setStyle(this.selectableStyle(this.getSandBoxStyle())),this.sandBoxLayer_.setStyle(new M.style.Polygon({fill:{color:"red",opacity:.5},stroke:{color:"#FF0000",width:2}})),this.setVisible(!0)}},{key:"setStyle",value:function(e){this.sandBoxLayer_.setStyle(e)}},{key:"selectableStyle",value:function(e){var t=this;return function(){return null===t.base_.highlightControl.getImpl().highlightInteraction_||-1==t.base_.highlightControl.getImpl().highlightInteraction_.getFeatures().getArray().indexOf(this)?e:t.base_.highlightControl.getImpl().highlightStyle}}},{key:"getType",value:function(){return this.type_}},{key:"setType",value:function(e){this.type_=e,"MultiPoint"===e||"Point"===e?this.sandBoxLayer_.setStyle(new M.style.Point({radius:5,fill:{color:"red",opacity:.5},stroke:{color:"#FF0000"}})):"MultiPolygon"!==e&&"Polygon"!==e||this.sandBoxLayer_.setStyle(new M.style.Polygon({fill:{color:"red",opacity:.5},stroke:{color:"#FF0000",width:2}}))}},{key:"getImplLayer",value:function(){return this.ol3Layer_}},{key:"getImplFeature",value:function(e){return e.getImpl().getOLFeature()}},{key:"getFeatureCollectionById",value:function(e){for(var t=this.ol3Layer_.getSource().getFeatures(),n=0;n<t.length;n++)if(t[n].getId()===e)return new ol.Collection([t[n]])}},{key:"getFeatureCollection",value:function(){var e=this.ol3Layer_.getSource().getFeatures();return new ol.Collection([e])}},{key:"getSelectedFeatureCollection",value:function(){for(var e=[],t=0;t<this.selectedFeatures_.length;t++)e.push(this.selectedFeatures_[t].getImpl().getOLFeature());return new ol.Collection(e)}},{key:"getOLFeatures",value:function(){return this.ol3Layer_.getSource().getFeatures()}},{key:"getFeatures",value:function(){return this.sandBoxLayer_.getFeatures()}},{key:"addFeatures",value:function(e){return this.sandBoxLayer_.addFeatures(e)}},{key:"hasGeometry",value:function(){return this.ol3Layer_.getSource().getFeatures().length>0}},{key:"getGeometry",value:function(){return this.geometry}},{key:"getCoordinatesFromFeature",value:function(e){return e.getGeometry().getCoordinates()}},{key:"getCoordinatesFromFeatureById",value:function(e){var t=this.getFeatureById(e);return null!==t?t.getGeometry().getCoordinates():null}},{key:"readGML3Features",value:function(e){var t=new ol.proj.Projection({code:"http://www.opengis.net/gml/srs/epsg.xml#25830",axis:"enu"});return ol.proj.addEquivalentProjections([ol.proj.get(this.map_.getProjection().code),t]),(new ol.format.GML3).readFeatures(e,this.map_.getProjection())}},{key:"addFeature",value:function(e){var t=(new ol.format.GeoJSON).writeFeatureObject(e),n=new M.Feature(e.getId(),t);return this.sandBoxLayer_.addFeatures(n),n}},{key:"removeFeatureById",value:function(e){var t=this.sandBoxLayer_.getFeatureById(e);return void 0!==t&&(this.sandBoxFeatures_=[],this.selectedFeatures_=[],this.sandBoxLayer_.removeFeatures([t]),this.deletedFeatures_.push(t),this.isModified_=!0,[t.getId()])}},{key:"removeFeature",value:function(e){var t=this;this.sandBoxLayer_.getFeatures().forEach((function(n){n===e&&t.sandBoxLayer_.removeFeatures([n])}))}},{key:"removeAllFeatures",value:function(){var e=this.sandBoxLayer_.getFeatures();return this.sandBoxLayer_.removeFeatures(e),Array.prototype.push.apply(this.deletedFeatures_,e),this.sandBoxFeatures_=[],this.selectedFeatures_=[],this.isModified_=!0,!0}},{key:"addFeaturesToSandBox",value:function(e){var t=this;e.forEach((function(e,n,o){for(var r=!1,i=0;i<t.sandBoxLayer_.getFeatures().length;i++)if(t.sandBoxLayer_.getFeatures()[i].getImpl().getId()===Number(e.id)){r=!0;break}if(!r){var a={type:"Feature",geometry:{type:e.type,coordinates:e.coordinates}},l=new M.Feature(e.id,a);t.sandBoxLayer_.addFeatures(l)}}))}},{key:"addNewFeatureToSandBox",value:function(e){var t=(new ol.format.GeoJSON).writeFeatureObject(e),n=new M.Feature(e.getId(),t);this.sandBoxLayer_.addFeatures(n)}},{key:"addNewMFeatureToSandBox",value:function(e){this.sandBoxLayer_.addFeatures(e)}},{key:"removeFeaturesFromSandBox",value:function(e){for(var t=e.length;t--;){var n=this.sandBoxLayer_.getFeatureById(e[t].getId());void 0!==n&&(n instanceof M.Feature?this.unselectFeature(n.getImpl().getOLFeature()):this.unselectFeature(n),this.sandBoxLayer_.removeFeatures(n))}}},{key:"selectFeature",value:function(e){var t=this.sandBoxLayer_.getFeatureById(e.getId());void 0!==t&&(t.getImpl().getOLFeature().setStyle(this.selectableStyle(this.getSelectedStyle())),this.selectedFeatures_.push(t))}},{key:"unselectFeature",value:function(e){for(var t=this.selectedFeatures_.length;t--;)this.selectedFeatures_[t].getImpl().getOLFeature().getId()===e.getId()&&(this.selectedFeatures_[t].getImpl().getOLFeature().setStyle(this.selectableStyle(this.getSandBoxStyle())),this.selectedFeatures_.splice(t,1))}},{key:"selectAllFeatures",value:function(){for(var e=this.sandBoxLayer_.getFeatures(),t=0;t<e.length;t++)this.selectedFeatures_.length>0?-1===this.selectedFeatures_.indexOf(e[t])&&this.selectFeature(e[t]):this.selectFeature(e[t])}},{key:"unselectAllFeatures",value:function(){for(var e=this.sandBoxLayer_.getFeatures(),t=0;t<e.length;t++)e[t].getImpl().getOLFeature().setStyle(this.selectableStyle(this.getSandBoxStyle()));this.selectedFeatures_=[]}},{key:"getGeometriesExtension",value:function(){var e=this.ol3Layer_.getSource().getFeatures(),t=new ol.extent.createEmpty;return e.forEach((function(e,n,o){ol.extent.extend(t,e.getGeometry().getExtent())})),t}},{key:"getOLFeaturesExtensionByAttribute",value:function(e,t){for(var n=[],o=0;o<e.length;o++){var r=this.getOLFeatureByUniqueAttribute(Number(e[o]),t);n.push(r)}var i=new ol.extent.createEmpty;return n.forEach((function(e,t,n){null!==e&&ol.extent.extend(i,e.getGeometry().getExtent())})),i}},{key:"getOLFeaturesExtension",value:function(e){for(var t=[],n=0;n<e.length;n++){var o=e[n].getImpl().getOLFeature();t.push(o)}var r=new ol.extent.createEmpty;return t.forEach((function(e,t,n){null!==e&&ol.extent.extend(r,e.getGeometry().getExtent())})),r}},{key:"zoomToLayer",value:function(){if(this.ol3Layer_.getSource().getFeatures().length>0){var e=this.ol3Layer_.getSource().getFeatures(),t=new ol.extent.createEmpty;e.forEach((function(e){ol.extent.extend(t,e.getGeometry().getExtent())})),this.map_.getMapImpl().getView().fit(t,{duration:500})}}},{key:"zoomToFeatures",value:function(e){try{var t=M.impl.utils.getFeaturesExtent(e);this.map_.setBbox(t)}catch(e){M.dialog.info("No existe ninguna geometría asociada")}}},{key:"zoomToFeaturesByIdsArray",value:function(e,t){try{var n=this.getOLFeaturesExtensionByAttribute(e,t);this.map_.getMapImpl().getView().fit(n,{maxZoom:12,duration:500})}catch(e){M.dialog.info("No existe ninguna geometría asociada")}}},{key:"zoomToFeatureById",value:function(e){var t=this.getFeatureById(e);if(null!==t){var n=new ol.extent.createEmpty;ol.extent.extend(n,t.getGeometry().getExtent()),this.map_.getMapImpl().getView().fit(n,{maxZoom:12,duration:500})}}},{key:"getMFeatureByUniqueAttribute",value:function(e,t){for(var n=this.sandBoxLayer_.getFeatures(),o=0;o<n.length;o++)if(n[o].getAttribute(t)===e)return n[o]}},{key:"getFeatureById",value:function(e){var t=null;return this.ol3Layer_.getSource().getFeatures().length>0&&this.ol3Layer_.getSource().getFeatures().forEach((function(n,o,r){if(n.getId()===e)return t=n,!0})),t}},{key:"getMFeatureById",value:function(e){return this.sandBoxLayer_.getFeatureById(e)}},{key:"getOLFeatureByUniqueAttribute",value:function(e,t){var n=null;return this.ol3Layer_.getSource().getFeatures().length>0&&this.ol3Layer_.getSource().getFeatures().forEach((function(o,r,i){if(o.get(t)===e)return n=o,!0})),n}},{key:"getDeletedFeatures",value:function(){return this.deletedFeatures_}},{key:"clearDeletedFeaturesArray",value:function(){this.deletedFeatures_=[]}},{key:"rollbackFeatures",value:function(e){this.ol3Layer_.getSource().addFeatures(e)}},{key:"clear",value:function(){this.ol3Layer_.getSource().clear()}},{key:"refresh",value:function(){this.ol3Layer_.getSource().refresh()}},{key:"destroy",value:function(){var e=this.map_.getMapImpl();M.utils.isNullOrEmpty(this.ol3Layer_)||(e.removeLayer(this.ol3Layer_),this.ol3Layer_=null),this.map_.removeLayers(this.sandBoxLayer_),this.map_=null,this.popup_=null,this.sandBoxFeatures_=[],this.name=null}},{key:"getSandBoxStyle",value:function(){return new ol.style.Style({fill:new ol.style.Fill({color:[93,95,229,.2]}),stroke:new ol.style.Stroke({color:"blue",width:2}),image:new ol.style.Circle({radius:4,fill:new ol.style.Fill({color:[93,95,229,.8]}),stroke:new ol.style.Stroke({color:"blue",width:2})})})}},{key:"getSelectedStyle",value:function(){return new ol.style.Style({fill:new ol.style.Fill({color:[249,232,6,.1]}),stroke:new ol.style.Stroke({color:"yellow",width:2}),image:new ol.style.Circle({radius:4,fill:new ol.style.Fill({color:[249,232,6,.8]}),stroke:new ol.style.Stroke({color:"yellow",width:2})})})}}])&&a(t.prototype,n),o&&a(t,o),i}();function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function p(e,t,n){return(p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=v(e)););return e}(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=v(e);if(t){var r=v(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return m(this,n)}}function m(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(i,M.impl.Control);var t,n,o,r=g(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=r.call(this)).layer_=t,n.modifiedFeatures=[],n.interactions_=[],n}return t=i,(n=[{key:"addTo",value:function(e,t){p(v(i.prototype),"addTo",this).call(this,e,t)}},{key:"activate",value:function(e,t,n){if(this.interactions_.length<1){this.createInteraction(e,t,n);for(var o=0;o<this.interactions_.length;o++)this.layer_.map_.getMapImpl().addInteraction(this.interactions_[o])}for(var r=0;r<this.layer_.map_.getControls().length;r++)this.layer_.map_.getControls()[r].activated&&this.layer_.map_.getControls()[r].deactivate();for(var i=0;i<this.interactions_.length;i++)this.interactions_[i].setActive(!0)}},{key:"deactivate",value:function(){if(this.interactions_.length>0){for(var e=0;e<this.interactions_.length;e++)this.interactions_[e].setActive(!1),this.layer_.map_.getMapImpl().removeInteraction(this.interactions_[e]);this.interactions_=[]}}},{key:"destroy",value:function(){this.layer_.map_.getMapImpl().removeControl(this),this.layer_=null,this.interactions_=[],this.modifiedFeatures=null}}])&&d(t.prototype,n),o&&d(t,o),i}();function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=O(e);if(t){var r=O(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return F(this,n)}}function F(e,t){return!t||"object"!==_(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var k=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(i,e);var t,n,o,r=P(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=r.call(this,e,t)).map_=e,n.selectInteraction_=null,n}return t=i,(n=[{key:"createInteraction",value:function(e,t){this.selectInteraction_=new ol.interaction.Select({layers:[this.layer_.sandBoxLayer_.getImpl().getOL3Layer()],multi:!0,condition:ol.events.condition.click}),this.selectInteraction_.on("select",e,this),this.interactions_.push(this.selectInteraction_)}}])&&w(t.prototype,n),o&&w(t,o),i}(b);function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function L(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function B(e,t){return(B=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=E(e);if(t){var r=E(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return j(this,n)}}function j(e,t){return!t||"object"!==x(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var I=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&B(e,t)}(i,M.Control);var t,n,o,r=C(i);function i(e,t){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),M.utils.isUndefined(k)&&M.exception("La implementación usada no puede crear controles EditionSelectGeometry");var o=new k(e,t);return(n=r.call(this,o,"editionSelectGeometry")).name="editionSelectGeometry",n}return t=i,(n=[{key:"activate",value:function(e,t){this.getImpl().activate(e,t),this.activated=!0}},{key:"equals",value:function(e){return e instanceof M.control.EditionSelectGeometry}},{key:"setLayer",value:function(e){this.getImpl().layer_=e}}])&&L(t.prototype,n),o&&L(t,o),i}();function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function R(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function G(e,t,n){return(G="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=A(e)););return e}(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function D(e,t){return(D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=A(e);if(t){var r=A(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return z(this,n)}}function z(e,t){return!t||"object"!==T(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var q=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&D(e,t)}(i,M.impl.Control);var t,n,o,r=N(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),r.call(this)}return t=i,(n=[{key:"addTo",value:function(e,t){var n=this;e.getMapImpl().getInteractions().forEach((function(e){e instanceof ol.interaction.DoubleClickZoom&&(n.dblClickInteraction_=e)})),G(A(i.prototype),"addTo",this).call(this,e,t)}},{key:"activateClick",value:function(e){this.dblClickInteraction_.setActive(!1),e.getMapImpl().on("dblclick",(function(t){var n=new CustomEvent("mapclicked",{detail:t.coordinate,bubbles:!0});e.getContainer().dispatchEvent(n)}))}},{key:"deactivateClick",value:function(e){this.dblClickInteraction_.setActive(!0),e.getMapImpl().removeEventListener("dblclick")}}])&&R(t.prototype,n),o&&R(t,o),i}();function J(e){return(J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function V(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Z(e,t){return(Z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function U(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=H(e);if(t){var r=H(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return W(this,n)}}function W(e,t){return!t||"object"!==J(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function H(e){return(H=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var X=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Z(e,t)}(i,e);var t,n,o,r=U(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=r.call(this,e,t)).map_=e,n.highlightInteraction_=null,n}return t=i,(n=[{key:"createInteraction",value:function(e,t){this.highlightStyle=[new ol.style.Style({fill:new ol.style.Fill({color:[249,177,10,.2]})}),new ol.style.Style({stroke:new ol.style.Stroke({color:"orange",width:2.5})})],this.highlightInteraction_=new ol.interaction.Select({layers:[this.layer_.sandBoxLayer_.getImpl().getOL3Layer()],condition:ol.events.condition.pointerMove,style:this.highlightStyle}),this.interactions_.push(this.highlightInteraction_)}}])&&V(t.prototype,n),o&&V(t,o),i}(b);function Y(e){return(Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function K(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Q(e,t){return(Q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=te(e);if(t){var r=te(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return ee(this,n)}}function ee(e,t){return!t||"object"!==Y(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function te(e){return(te=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ne=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Q(e,t)}(i,M.Control);var t,n,o,r=$(i);function i(e,t){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),M.utils.isUndefined(X)&&M.exception("La implementación usada no puede crear controles EditionHighlightGeometry");var o=new X(e,t);return(n=r.call(this,o,"editionHighlightGeometry")).name="editionHighlightGeometry",n}return t=i,(n=[{key:"activate",value:function(e,t){this.getImpl().activate(e,t),this.activated=!0}},{key:"deactivate",value:function(){this.getImpl().deactivate(),this.getImpl().highlightInteraction_=null}},{key:"equals",value:function(e){return e instanceof M.control.EditionHighlightGeometry}},{key:"setLayer",value:function(e){this.getImpl().layer_=e}}])&&K(t.prototype,n),o&&K(t,o),i}();function oe(e){return(oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function re(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function ie(e,t){return(ie=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ae(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=ce(e);if(t){var r=ce(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return le(this,n)}}function le(e,t){return!t||"object"!==oe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ce(e){return(ce=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var se=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ie(e,t)}(i,e);var t,n,o,r=ae(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=r.call(this,e,t)).map_=e,n.drawInteraction_=null,n}return t=i,(n=[{key:"createInteraction",value:function(e,t,n){var o=null,r=this.layer_.getType();null!=n&&(r=n.getType());var i=this.getSimpleType(r);"Point"==r?o=new ol.style.Style({image:new ol.style.Circle({radius:7,fill:new ol.style.Fill({color:"withe"}),stroke:new ol.style.Stroke({color:[255,0,0],width:2})})}):"Polygon"==r&&(o=new ol.style.Style({fill:new ol.style.Fill({color:"rgba(255, 255, 255, 0.2)"}),stroke:new ol.style.Stroke({color:"#ffcc33",width:2}),image:new ol.style.Circle({radius:4,fill:new ol.style.Fill({color:"#ffcc33"})})})),this.drawInteraction_=new ol.interaction.Draw({type:i,style:o}),this.drawInteraction_.on("drawend",e,this),this.interactions_.push(this.drawInteraction_)}},{key:"getSimpleType",value:function(e){return"MultiPoint"===e||"Point"===e?"Point":"MultiPolygon"===e||"Polygon"===e?"Polygon":"MultiLineString"===e||"LineString"===e?"LineString":void 0}}])&&re(t.prototype,n),o&&re(t,o),i}(b);function ue(e){return(ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fe(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function ye(e,t){return(ye=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function de(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=he(e);if(t){var r=he(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return pe(this,n)}}function pe(e,t){return!t||"object"!==ue(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function he(e){return(he=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ge=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ye(e,t)}(i,M.Control);var t,n,o,r=de(i);function i(e,t){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),M.utils.isUndefined(se)&&M.exception("La implementación usada no puede crear controles EditionInsertGeometry");var o=new se(e,t);return(n=r.call(this,o,"editionInsertGeometry")).name="editionInsertGeometry",n}return t=i,(n=[{key:"activate",value:function(e,t,n){this.getImpl().activate(e,t,n),this.activated=!0}},{key:"equals",value:function(e){return e instanceof M.control.EditionInsertGeometry}},{key:"setLayer",value:function(e){this.getImpl().layer_=e}}])&&fe(t.prototype,n),o&&fe(t,o),i}();function me(e){return(me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ve(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function be(e,t){return(be=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _e(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Se(e);if(t){var r=Se(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return we(this,n)}}function we(e,t){return!t||"object"!==me(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Se(e){return(Se=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Pe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&be(e,t)}(i,e);var t,n,o,r=_e(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=r.call(this,e,t)).map_=e,n.modifyInteraction_=null,n}return t=i,(n=[{key:"createInteraction",value:function(e,t){var n=this.layer_.getSelectedFeatureCollection(),o=new ol.style.Style({image:new ol.style.Circle({radius:4,fill:new ol.style.Fill({color:"#ffcc33"})})});this.modifyInteraction_=new ol.interaction.Modify({features:n,deleteCondition:function(e){return ol.events.condition.shiftKeyOnly(e)&&ol.events.condition.singleClick(e)},style:o}),this.modifyInteraction_.on("modifyend",e,this),this.interactions_.push(this.modifyInteraction_)}}])&&ve(t.prototype,n),o&&ve(t,o),i}(b);function Fe(e){return(Fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Oe(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function ke(e,t){return(ke=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function xe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Be(e);if(t){var r=Be(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Le(this,n)}}function Le(e,t){return!t||"object"!==Fe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Be(e){return(Be=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Me=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ke(e,t)}(i,M.Control);var t,n,o,r=xe(i);function i(e,t){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),M.utils.isUndefined(Pe)&&M.exception("La implementación usada no puede crear controles EditionModifyGeometry");var o=new Pe(e,t);return(n=r.call(this,o,"editionModifyGeometry")).name="editionModifyGeometry",n}return t=i,(n=[{key:"activate",value:function(e,t){this.getImpl().activate(e,t),this.activated=!0}},{key:"equals",value:function(e){return e instanceof M.control.EditionModifyGeometry}},{key:"setLayer",value:function(e){this.getImpl().layer_=e}}])&&Oe(t.prototype,n),o&&Oe(t,o),i}();function Ce(e){return(Ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function je(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Ee(e,t){return(Ee=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ie(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Re(e);if(t){var r=Re(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Te(this,n)}}function Te(e,t){return!t||"object"!==Ce(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Re(e){return(Re=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ge=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ee(e,t)}(i,e);var t,n,o,r=Ie(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=r.call(this,e,t)).map_=e,n.drawInteraction_=null,n}return t=i,(n=[{key:"createInteraction",value:function(e,t){var n=new ol.style.Style({fill:new ol.style.Fill({color:"rgba(255, 255, 255, 0.2)"}),stroke:new ol.style.Stroke({color:"#ffa733",width:2}),image:new ol.style.Circle({radius:4,fill:new ol.style.Fill({color:"#ffcc33"})})});this.drawInteraction_=new ol.interaction.Draw({type:"Point"===t?"Point":"LineString"===t?"LineString":"Polygon",style:n}),this.drawInteraction_.on("drawend",e,this),this.interactions_.push(this.drawInteraction_)}}])&&je(t.prototype,n),o&&je(t,o),i}(b);function De(e){return(De="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ne(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function ze(e,t){return(ze=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ae(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Je(e);if(t){var r=Je(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return qe(this,n)}}function qe(e,t){return!t||"object"!==De(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Je(e){return(Je=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ve=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ze(e,t)}(i,M.Control);var t,n,o,r=Ae(i);function i(e,t){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),M.utils.isUndefined(Ge)&&M.exception("La implementación usada no puede crear controles EditionInsertLine");var o=new Ge(e,t);return(n=r.call(this,o,"editionInsertLine")).name="editionInsertLine",n}return t=i,(n=[{key:"activate",value:function(e,t,n){this.getImpl().activate(e,t,n),this.activated=!0}},{key:"equals",value:function(e){return e instanceof M.control.EditionTemporalGeometry}}])&&Ne(t.prototype,n),o&&Ne(t,o),i}();function Ze(e){return(Ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ue(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function We(e,t){return(We=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function He(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Ye(e);if(t){var r=Ye(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Xe(this,n)}}function Xe(e,t){return!t||"object"!==Ze(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ye(e){return(Ye=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ke=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&We(e,t)}(i,e);var t,n,o,r=He(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=r.call(this,e,t)).map_=e,n.snapInteraction_=null,n}return t=i,(n=[{key:"createInteraction",value:function(e,t){this.snapInteraction_=new ol.interaction.Snap({source:this.layer_.getImplLayer().getSource()}),this.interactions_.push(this.snapInteraction_)}}])&&Ue(t.prototype,n),o&&Ue(t,o),i}(b);function Qe(e){return(Qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function et(e,t){return(et=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function tt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=ot(e);if(t){var r=ot(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return nt(this,n)}}function nt(e,t){return!t||"object"!==Qe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ot(e){return(ot=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var rt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&et(e,t)}(i,M.Control);var t,n,o,r=tt(i);function i(e,t){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),M.utils.isUndefined(Ke)&&M.exception("La implementación usada no puede crear controles EditionSnapping");var o=new Ke(e,t);return(n=r.call(this,o,"editionSnapping")).name="editionSnapping",n}return t=i,(n=[{key:"activate",value:function(e,t){this.getImpl().activate(e,t),this.activated=!0}},{key:"equals",value:function(e){return e instanceof M.control.EditionSnapping}},{key:"setLayer",value:function(e){this.getImpl().layer_=e}}])&&$e(t.prototype,n),o&&$e(t,o),i}();function it(e){return(it="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function at(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function lt(e,t,n){return(lt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ft(e)););return e}(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function ct(e,t){return(ct=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function st(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=ft(e);if(t){var r=ft(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return ut(this,n)}}function ut(e,t){return!t||"object"!==it(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ft(e){return(ft=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var yt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ct(e,t)}(i,M.impl.Control);var t,n,o,r=st(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=r.call(this)).map=e,t}return t=i,(n=[{key:"addTo",value:function(e,t){lt(ft(i.prototype),"addTo",this).call(this,e,t)}},{key:"getFeaturesFromGeoJson",value:function(e){return(new ol.format.GeoJSON).readFeatures(e)}},{key:"getGeoJsonFromFeature",value:function(e){return(new ol.format.GeoJSON).writeFeatureObject(e)}},{key:"getFeatureRequestBody",value:function(e,t){var n=new ol.geom.Point(t),o=this.map.getProjection().code;return(new ol.format.WFS).writeGetFeature({srsName:o,featurePrefix:e.featurePrefix,featureTypes:e.featureTypes,outputFormat:e.outputFormat,maxFeatures:e.maxFeatures,filter:ol.format.filter.intersects(e.geomField,n,o)})}},{key:"getBbox",value:function(e){for(var t=ol.extent.boundingExtent([e,e]),n=0;n<t.length;n++)2!=n&&3!=n||(t[n]=t[n]+1e-10);return t}},{key:"getModifyStyle",value:function(e){return[new ol.style.Style({fill:new ol.style.Fill({color:"rgba(239,245,3,0.25)"}),stroke:new ol.style.Stroke({width:3,color:"rgba(239,245,3, 0.8)"}),image:new ol.style.Circle({radius:4,fill:new ol.style.Fill({color:"rgba(239,245,3,0.8)"}),stroke:new ol.style.Stroke({color:"rgba(239,245,3, 1)",width:2})})}),new ol.style.Style({image:new ol.style.Circle({radius:6,fill:new ol.style.Fill({color:"rgba(230,137,16, 0.8)"})}),geometry:function(t){var n=e.getGeometry().getCoordinates();return"MultiPolygon"===e.getGeometry().getType()&&(n=e.getGeometry().getCoordinates()[0][0]),new ol.geom.MultiPoint(n)}})]}},{key:"createOLPolygonFeature",value:function(e){for(var t,n=e.getGeometry(),o=0;o<n.coordinates.length;o++){var r=n.coordinates[o];t=new M.Feature(Math.floor(1e6*Math.random()),{type:"Polygon",geometry:r,geometry_name:"geometry",properties:{}})}return t}}])&&at(t.prototype,n),o&&at(t,o),i}(),dt=n(1),pt=n.n(dt),ht={en:n(2),es:n(3)},gt=function(){var e="es";return"function"==typeof M.language.getLang&&(e=M.language.getLang()),e},mt=function(e){return ht[e]},vt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:gt(),n=mt(t),o="";return M.utils.isNullOrEmpty(n)?console.warn("The translation '".concat(t,"' has not been defined.")):o=e.split(".").reduce((function(e,t){return e[t]}),n),o},bt=function(e,t,n,o,r,i){var a=M.template.compileSync(pt.a,{jsonp:!1,vars:{message:e,title:t,severity:n,layers:i,translations:{accept_btn:vt("accept_btn"),cancel_btn:vt("cancel_btn")}}});wt(a,o,r)},_t=function(){var e=document.querySelector("div.m-dialog");document.querySelector("div.m-mapea-container").removeChild(e)},wt=function(e,t,n){var o=document.querySelector("div.m-mapea-container"),r=e.querySelector("#m-edition-dialog-button-aceptar > button"),i=e.querySelector("#m-edition-dialog-button-cancelar > button");void 0===n?i.addEventListener("click",_t,!1):i.addEventListener("click",n,!1);var a=e.querySelector(".m-layer-selection");a?r.addEventListener("click",(function(){t(a.value)}),!1):r.addEventListener("click",t,!1),o.appendChild(e)},St=function(e){return(new jsts.io.GeoJSONWriter).write(e)},Pt=function(e,t){var n=new M.Feature(e.getId(),e.getGeoJSON());return n.setGeometry(Ft(e.getGeometry(),t.getGeometry())),n},Ft=function(e,t){var n=Lt(e),o=Lt(t),r=n.union(o);return St(r)},Ot=function(e,t){var n=Lt(t),o=[];return e.forEach((function(e){Lt(e.getGeometry()).intersects(n)&&o.push(e)})),o},kt=function(e,t){var n=Lt(e.getGeometry()),o=Lt(t.getGeometry()),r=n.intersection(o);return St(r)},xt=function(e,t){var n=Lt(t.getGeometry()),o=Lt(e.getGeometry()).difference(n);return St(o)},Lt=function(e){return(new jsts.io.GeoJSONReader).read(e)},Bt=function(e,t){var n=Lt(t.getGeometry());void 0!==n._geometries&&(n=n._geometries[0]);var o=Lt(e.getGeometry());try{var r=n.getExteriorRing().union(o),i=new jsts.operation.polygonize.Polygonizer;i.add(r);var a=i.getPolygons(),l=a,c=null;if(a.size()<2)try{var s=t.getGeometry(),u=turf.polygonToLine(s);u.geometry.coordinates.push(e.getGeometry().coordinates);var f=turf.lineToPolygon(u);return c=turf.polygon([f.geometry.coordinates[f.geometry.coordinates.length-1]]),Et(c,t)}catch(e){return null}var y=n.getExteriorRing(),d=new jsts.operation.polygonize.Polygonizer;if(d.add(y),i.getGeometry().getArea()-d.getGeometry().getArea()>.1)return-1;if(n.getNumInteriorRing()>0){if(o.isSimple()){var p=Ct(i,n);return jt(null,p,t)}return c=Mt(n,o),jt(c,n,t)}return a.size()<2?null:It(l,t)}catch(e){return}},Mt=function(e,t){var n=new jsts.operation.polygonize.Polygonizer,o=e.getExteriorRing().union(t);n.add(o);for(var r=n.getPolygons().iterator();r.hasNext();){var i=r.next();if(i._holes.length>0)return n.add(i._holes[0]),n.getPolygons().get(0)}return!1},Ct=function(e,t){for(var n=e.getPolygons(),o=new jsts.operation.polygonize.Polygonizer,r=n.get(0),i=null,a=0;a<t._holes.length;a++)o.add(t._holes[a]);var l=o.getPolygons();2===n.size()&&(i=n.get(1));for(var c=l.iterator();c.hasNext();){var s=c.next();r=r.difference(s),null!==i&&(i=i.difference(s))}var u=[];return u.push(r),null!==i&&u.push(i),u},jt=function(e,t,n){var o,r,i=[],a=1,l=[];if(null!==e){var c=n.getGeometry(),s=t.difference(e),u=e.intersection(t),f=St(s),y=St(u);if(null===f||null===y)return-1;c=f,e=y,l.push(c),l.push(e);for(var d=0;d<l.length;d++)r=new M.Feature(Math.random(),{type:"Feature",id:Math.random(),geometry:l[d],geometry_name:"geometry",properties:{}}),i.push(r),a+=a}else{l=t;for(var p=0;p<l.length;p++)o=St(l[p]),r=new M.Feature(Math.random(),{type:"Feature",id:Math.random(),geometry:o,geometry_name:"geometry",properties:{}}),i.push(r),a++}return i},Et=function(e,t){var n=[],o=1,r=[],i=t.getGeometry(),a=i;try{if(!turf.booleanContains(a,e)&&!turf.booleanOverlap(a,e))return-1;var l=Lt(i),c=Lt(e.geometry),s=l.difference(c),u=c.intersection(l),f=St(s),y=St(u);if(null===f||null===y)return-1;a.geometry=f,e.geometry=y,r.push(a),r.push(e)}catch(e){return-2}for(var d=0;d<r.length;d++){var p=new M.Feature(Math.random(),{type:"Feature",id:Math.random(),geometry:r[d],geometry_name:"geometry",properties:{}});n.push(p),o+=o}return n},It=function(e,t){for(var n=[],o=1,r=e.iterator();r.hasNext();){var i=r.next(),a=St(i),l=new M.Feature(Math.random(),t.getGeoJSON());l.setGeometry(a),n.push(l),o+=o}return n};function Tt(e){return(Tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Rt(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Gt(e,t){return(Gt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Dt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=zt(e);if(t){var r=zt(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Nt(this,n)}}function Nt(e,t){return!t||"object"!==Tt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function zt(e){return(zt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var At=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Gt(e,t)}(i,e);var t,n,o,r=Dt(i);function i(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),M.utils.isUndefined(yt)&&M.exception("La implementación usada no puede crear controles EditionGeometryControl");var n=new yt(e.facadeMap_);return(t=r.call(this,n,"editionGeometryControl")).NAME="editionGeometryControl",t.impl_=n,t.facadeMap_=e.facadeMap_,t.base=e,t.element_=e.element_,t.entityLayer_=e.sandBoxLayer_,t.insertGeomControl=t.base.insertGeomControl,t.insertTemporalGeomControl=t.base.insertTemporalGeomControl,t.modifyGeomControl=t.base.modifyGeomControl,t.translateGeomControl=t.base.translateGeomControl,t.selectGeomControl=t.base.selectGeomControl,t.snappingControl=t.base.snappingControl,t.highlightControl=t.base.highlightControl,t.entityAddWFSControl=null,t.insertPolygonButton=null,t.selectPolygonButton=null,t.selectPolygonByAreaButton=null,t.selectPolygonByLineButton=null,t.selectAllSandboxPolygonButton=null,t.modifyPolygonButton=null,t.dividePolygonButton=null,t.joinPolygonsButton=null,t.intersectPolygonButton=null,t.emptyPolygonButton=null,t.zoomToSelectedButton=null,t.addGeomButton=null,t.WFSManagerCtl=null,t.addEvents(),t}return t=i,(n=[{key:"addEvents",value:function(){this.self_=this,this.snappingButton=this.element_.querySelector("#m-snapping-button"),this.snappingButton.addEventListener("click",this.activateSnapping.bind(this),!1),this.zoomMenuElement=this.element_.querySelector("#m-zoommenu-button"),this.zoomMenuPolygonButton=this.element_.querySelector("#m-zoom-button"),this.zoomMenuPolygonButtonClass=this.zoomMenuPolygonButton.classList.value,this.zoomMenuPolygonButton.addEventListener("click",this.manageSelectedClassInDropdown,!1),this.zoomMenuElement.addEventListener("mouseover",this.showDropdownContent,!1),this.zoomMenuElement.addEventListener("mouseout",this.hideDropdownContent,!1),this.zoomDropdownMenu=this.zoomMenuElement.querySelector("#myDropdown"),this.zoomToSandBoxButton=this.element_.querySelector("button#m-zoomsandbox-button"),this.zoomToSandBoxButton.addEventListener("click",this.zoomToSandBox.bind(this),!1),this.zoomToSelectedButton=this.element_.querySelector("button#m-zoomselect-button"),this.zoomToSelectedButton.addEventListener("click",this.zoomToSelection.bind(this),!1),this.selectMenuElement=this.element_.querySelector("#m-selectmenu-button"),this.selectMenuPolygonButton=this.element_.querySelector("#m-select-button"),this.selectMenuPolygonButtonClass=this.selectMenuPolygonButton.classList.value,this.selectMenuPolygonButton.addEventListener("click",this.manageSelectedClassInDropdown,!1),this.selectMenuElement.addEventListener("mouseover",this.showDropdownContent,!1),this.selectDropdownMenu=this.selectMenuElement.querySelector("#myDropdown"),this.selectMenuElement.addEventListener("mouseout",this.hideDropdownContent,!1),this.removeFromSandBoxButton=this.element_.querySelector("button#m-removefromsandbox-button"),this.removeFromSandBoxButton.addEventListener("click",this.removeSelectedFeaturesFromSandBox.bind(this),!1),this.selectPolygonButton=this.element_.querySelector("button#m-selectclick-button"),this.selectPolygonButton.addEventListener("click",this.selectPolygonByClick.bind(this),!1),this.selectPolygonByAreaButton=this.element_.querySelector("button#m-selectarea-button"),this.selectPolygonByAreaButton.addEventListener("click",this.selectPolygonByDraw.bind(this),!1),this.selectPolygonByLineButton=this.element_.querySelector("button#m-selectline-button"),this.selectPolygonByLineButton.addEventListener("click",this.selectPolygonByDraw.bind(this),!1),this.selectAllSandboxPolygonButton=this.element_.querySelector("button#m-selectall-button"),this.selectAllSandboxPolygonButton.addEventListener("click",this.selectAllSandboxPolygon.bind(this),!1),this.deselectAllSandboxPolygonButton=this.element_.querySelector("button#m-deselectall-button"),this.deselectAllSandboxPolygonButton.addEventListener("click",this.deselectAllSandboxPolygon.bind(this),!1),this.insertPolygonButton=this.element_.querySelector("button#m-draw-button"),this.insertPolygonButton.addEventListener("click",this.insertPolygon.bind(this),!1),this.modifyPolygonButton=this.element_.querySelector("button#m-modify-button"),this.modifyPolygonButton.addEventListener("click",this.modifyPolygon.bind(this),!1),this.dividePolygonButton=this.element_.getElementsByTagName("button")["m-splitpolygon-button"],this.dividePolygonButton.addEventListener("click",this.dividePolygon.bind(this),!1),this.joinPolygonsButton=this.element_.querySelector("button#m-unir-button"),this.joinPolygonsButton.addEventListener("click",this.confirmDialogJoinPolygons.bind(this),!1),this.addGeomButton=this.element_.querySelector("button#m-addgeometry-button"),this.addGeomButton.addEventListener("click",this.addGeom.bind(this),!1),this.intersectPolygonButton=this.element_.querySelector("button#m-intersect-button"),this.intersectPolygonButton.addEventListener("click",this.intersectPolygon.bind(this),!1),this.emptyPolygonButton=this.element_.querySelector("button#m-vaciado-button"),this.emptyPolygonButton.addEventListener("click",this.emptyPolygon.bind(this),!1)}},{key:"showDropdownContent",value:function(e){""!==e.currentTarget.children[1].style.width&&"0px"!==e.currentTarget.children[1].style.width||(e.currentTarget.children[0].style.float="left",e.currentTarget.children[1].style.left="40px","m-zoommenu-button"===e.currentTarget.id?e.currentTarget.children[1].style.width="80px":e.currentTarget.children[1].style.width="200px",e.currentTarget.children[1].style.borderTopRightRadius="4px",e.currentTarget.children[1].style.borderBottomRightRadius="4px",e.currentTarget.children[0].style.marginBottom="-4px")}},{key:"hideDropdownContent",value:function(e){e.currentTarget.children[1].style.width="0px"}},{key:"manageSelectedClassInDropdown",value:function(e){var t;"m-select-button"===e.currentTarget.id&&"g-cartografia-flecha"!==e.currentTarget.classList.value?"g-cartografia-flecha"===this.selectMenuPolygonButtonClass&&(t=this.selectMenuPolygonButtonClass,e.currentTarget.nextElementSibling.style.width="0px",e.currentTarget.classList.value=t,this.deactiveControls()):null!==e.currentTarget.offsetParent.previousElementSibling&&"m-zoom-button"!==e.currentTarget.offsetParent.previousElementSibling.id&&(t=e.currentTarget.classList.value,e.currentTarget.offsetParent.style.width="0px",e.currentTarget.offsetParent.previousElementSibling.classList.value=t)}},{key:"restoreDefaultClassDropdownButtons",value:function(){this.selectMenuPolygonButton.classList.value=this.selectMenuPolygonButtonClass}},{key:"removeSelectedFeaturesFromSandBox",value:function(e){if(this.entityLayer_.selectedFeatures_.length>0){var t=this.removeSelectedFeatures.bind(this);bt(vt("dialog_removeFeatures"),vt("dialog_removeFeatures_title"),"info",t)}else M.dialog.info(vt("dialog_removeFeatures_noGeometry"),vt("dialog_removeFeatures_title"))}},{key:"removeSelectedFeatures",value:function(){this.deactiveControls(),this.unselectControls(),this.entityLayer_.removeFeaturesFromSandBox(this.entityLayer_.selectedFeatures_),_t()}},{key:"activateSnapping",value:function(e){e.currentTarget.className.indexOf("selected")<0?(e.currentTarget.className+=" selected",e.currentTarget.title=vt("snapping_disable"),this.snappingControl.activate(null,null)):(e.currentTarget.title=vt("snapping"),e.currentTarget.className=this.snappingButton.className.replace(" selected",""),this.snappingControl.deactivate())}},{key:"insertPolygon",value:function(e){if(this.restoreDefaultClassDropdownButtons(),this.deactiveControls(),e.currentTarget.className.indexOf("selected")<0){this.unselectControls(),e.currentTarget.className+=" selected";var t=this.onPolygonInserted.bind(this);this.insertGeomControl.activate(t),this.snappingControl.deactivate(),this.snappingButton.className.indexOf("selected")>0&&this.snappingControl.activate(null,null)}else this.unselectControls()}},{key:"onPolygonInserted",value:function(e){this.entityLayer_.addNewFeatureToSandBox(e.feature)}},{key:"selectPolygonByClick",value:function(e){if(this.manageSelectedClassInDropdown(e),this.deactiveControls(),e.currentTarget.offsetParent.previousElementSibling.className.indexOf("selected")<0){this.unselectControls(),e.currentTarget.offsetParent.previousElementSibling.className+=" selected";var t=this.onPolygonSelected.bind(this);this.selectGeomControl.activate(t)}else this.showDropdownContent()}},{key:"onPolygonSelected",value:function(e){var t=this,n=null;if(e.selected.length>0){if(this.entityLayer_.getFeatures().forEach((function(o,r,i){for(var a=0;a<e.selected.length;a++)e.selected[a].getId()===t.entityLayer_.getImplFeature(o).getId()&&(n=e.selected[a])})),null!==n){var o=null;this.entityLayer_.selectedFeatures_.forEach((function(n,r,i){for(var a=0;a<e.selected.length;a++)e.selected[a].getId()===t.entityLayer_.getImplFeature(n).getId()&&(o=e.selected[a])})),null===o?this.entityLayer_.selectFeature(n):this.entityLayer_.unselectFeature(n)}e.target.getFeatures().clear()}}},{key:"selectPolygonByDraw",value:function(e){this.manageSelectedClassInDropdown(e);var t="m-selectarea-button"===e.currentTarget.id?"Polygon":"LineString";if(this.deactiveControls(),e.currentTarget.offsetParent.previousElementSibling.className.indexOf("selected")<0){this.unselectControls(),e.currentTarget.offsetParent.previousElementSibling.className+=" selected";var n=this.onPolygonSelectedByDraw.bind(this);this.insertTemporalGeomControl.activate(n,t)}else this.showDropdownContent()}},{key:"onPolygonSelectedByDraw",value:function(e){for(var t=this.entityLayer_.getFeatures(),n=Ot(t,this.impl_.getGeoJsonFromFeature(e.feature).geometry),o=0;o<n.length;o++){var r=null;if(t.forEach((function(e,t,i){n[o].getId()===e.getId()&&(r=n[o])})),null!==r){var i=null;this.entityLayer_.selectedFeatures_.forEach((function(e,t,r){n[o].getId()===e.getId()&&(i=n[o])})),null===i?this.entityLayer_.selectFeature(r):this.entityLayer_.unselectFeature(r)}}}},{key:"selectAllSandboxPolygon",value:function(){this.entityLayer_.getFeatures().length>0?(this.deactiveControls(),this.unselectControls(),this.entityLayer_.selectAllFeatures()):M.dialog.info(vt("dialog_noGeometry"))}},{key:"deselectAllSandboxPolygon",value:function(){this.entityLayer_.selectedFeatures_.length>0?(this.deactiveControls(),this.unselectControls(),this.entityLayer_.unselectAllFeatures()):M.dialog.info(vt("dialog_noGeometry_selected"))}},{key:"modifyPolygon",value:function(e){if(this.entityLayer_.selectedFeatures_.length>0)if(this.restoreDefaultClassDropdownButtons(),this.deactiveControls(),e.currentTarget.className.indexOf("selected")<0){this.unselectControls(),e.currentTarget.className+=" selected";for(var t=this.entityLayer_.selectedFeatures_,n=0;n<t.length;n++){var o=this.impl_.getModifyStyle(this.entityLayer_.getImplFeature(t[n]));this.entityLayer_.getImplFeature(t[n]).setStyle(o)}var r=this.onPolygonModified.bind(this);this.modifyGeomControl.activate(r),this.snappingControl.deactivate(),this.snappingButton.className.indexOf("selected")>0&&this.snappingControl.activate(null,null)}else this.unselectControls();else M.dialog.info(vt("dialog_noGeometry_selected"))}},{key:"onPolygonModified",value:function(e){for(var t=e.features.getArray(),n=0;n<t.length;n++)t[n].getRevision()>1&&t[n]}},{key:"dividePolygon",value:function(e){if(this.restoreDefaultClassDropdownButtons(),this.deactiveControls(),e.currentTarget.className.indexOf("selected")<0){this.unselectControls(),e.currentTarget.className+=" selected";var t=this.onPolygonDivided.bind(this);this.insertTemporalGeomControl.activate(t,"LineString"),document.body.style.cursor="pointer"}else this.unselectControls()}},{key:"onPolygonDivided",value:function(e){var t,n=this.entityLayer_.selectedFeatures_,o=[];if(n.length>0){var r=new M.Feature(Math.floor(1e6*Math.random()),this.impl_.getGeoJsonFromFeature(e.feature));t=Ot(n,r.getGeometry());for(var i=0;i<t.length;i++)o.push(Bt(r,t[i]));for(var a=!1,l=0;l<o.length;l++)0!==o[l]&&-1!==o[l]&&-2!==o[l]&&void 0!==o[l]&&null!==o[l]||(a=!0);if(a)M.dialog.info(vt("dialog_noValidGeometry"),vt("geometry_divide"));else{for(var c=0;c<o.length;c++)this.entityLayer_.addFeatures(o[c]);this.entityLayer_.removeFeaturesFromSandBox(t)}}else M.dialog.info(vt("dialog_atLeast_oneSelected"),vt("geometry_divide"))}},{key:"confirmDialogJoinPolygons",value:function(e){if(this.entityLayer_.selectedFeatures_.length>1){var t=this.joinPolygons.bind(this);bt(vt("dialog_union"),vt("dialog_union_title"),"info",t)}else M.dialog.info(vt("dialog_atLeast_twoSelected"),vt("dialog_union_title"))}},{key:"joinPolygons",value:function(){var e,t,n=this.entityLayer_.selectedFeatures_,o=[],r=[],i=[];this.restoreDefaultClassDropdownButtons(),_t();for(var a=0;a<n.length;a++){var l=new M.Feature(n[a].getId(),{type:"Feature",geometry:n[a].getGeometry(),geometry_name:"geometry",properties:{}});i.push(l)}if(n.length>0){this.deactiveControls(),this.unselectControls();for(var c=0;c<n.length;c++){e=n[c];for(var s=0;s<i.length;s++){o.push(e);var u=Lt(e.getGeometry()),f=Lt(i[s].getGeometry());if(!0===u.intersects(f)&&!1===e.equals(i[s])){r.push(this.entityLayer_.getImplFeature(e)),o.push(i[s]),(t=Pt(o[0],o[1])).setId(Math.floor(1e6*Math.random())),o=[],this.entityLayer_.addNewMFeatureToSandBox(t),r.push(i[s]),this.entityLayer_.removeFeaturesFromSandBox(r);for(var y=0;y<r.length;y++){var d=i.indexOf(r[y]);d>-1&&i.splice(d,1)}var p=t.getGeoJSON();e=new M.Feature(t.getId(),p),s=0,c=0}else o=[]}}}else M.dialog.info(vt("dialog_atLeast_twoSelected"))}},{key:"intersectPolygon",value:function(e){if(this.restoreDefaultClassDropdownButtons(),0!==this.entityLayer_.selectedFeatures_.length)if(this.deactiveControls(),e.currentTarget.className.indexOf("selected")<0){this.unselectControls(),e.currentTarget.className+=" selected",document.body.style.cursor="pointer";var t=this.onPolygonIntersected.bind(this);this.selectGeomControl.activate(t),this.highlightControl.activate()}else this.highlightControl.deactivate(),this.unselectControls();else M.dialog.info(vt("dialog_removeFeatures_noGeometry"),vt("dialog_intersect_title"))}},{key:"onPolygonIntersected",value:function(e){var t,n;if((n=this.entityLayer_.selectedFeatures_).length>0&&(t=Ot(n,this.entityLayer_.getMFeatureById(e.selected[0].getId()).getGeometry())).length>0){var o=[];o.push(t),o.push(this.entityLayer_.getMFeatureById(e.selected[0].getId())),this.doSpatialProcess(kt,o),this.clear()}}},{key:"emptyPolygon",value:function(e){if(this.restoreDefaultClassDropdownButtons(),0!==this.entityLayer_.selectedFeatures_.length)if(this.deactiveControls(),e.currentTarget.className.indexOf("selected")<0){this.unselectControls(),e.currentTarget.className+=" selected",document.body.style.cursor="pointer";var t=this.onGeometryEmptied.bind(this);this.selectGeomControl.activate(t),this.highlightControl.activate()}else this.highlightControl.deactivate(),this.unselectControls();else M.dialog.info(vt("dialog_removeFeatures_noGeometry"),vt("dialog_empty_title"))}},{key:"onGeometryEmptied",value:function(e){var t=this.entityLayer_.selectedFeatures_;if(t.length>0){var n=[];n.push(t),n.push(this.entityLayer_.getMFeatureById(e.selected[0].getId())),this.doSpatialProcess(xt,n),this.clear()}}},{key:"doSpatialProcess",value:function(e,t){for(var n=t[0],o=t[1],r=0;r<n.length;r++){var i=n[r];if(o!==i){var a=e.apply(this,[i,o]),l=new M.Feature(Math.floor(1e6*Math.random())+1,{type:"Feature",geometry:a,geometry_name:"geometry",properties:{}});if("MultiPolygon"===l.getGeometry().type){var c=this.impl_.createOLPolygonFeature(l);this.entityLayer_.addNewMFeatureToSandBox(c)}else this.entityLayer_.addNewMFeatureToSandBox(l)}(n.length>1||1===n.length&&o!==i)&&this.entityLayer_.removeFeaturesFromSandBox([i])}}},{key:"addGeom",value:function(e){var t=[];this.facadeMap_.getLayers().forEach((function(e){e instanceof M.layer.Vector&&"editionLayer"!=e.name&&e.getFeatures().length>0&&t.push(e)}));var n=this.addGeomFromVectorialLayer.bind(this);bt(vt("dialog_add_geometry"),vt("dialog_add_geometry_title"),"info",n,void 0,t)}},{key:"addGeomFromVectorialLayer",value:function(e){var t=this,n=this.facadeMap_.getLayers({name:e})[0];this.entityLayer_.removeAllFeatures();var o=n.getFeatures()[0].getGeometry().type;this.entityLayer_.setType(o),n.getFeatures().forEach((function(e){var n=e.getGeoJSON(),o=new M.Feature(e.getId(),n);t.entityLayer_.addNewMFeatureToSandBox(o)})),_t()}},{key:"checkWFSManagerPlugin",value:function(){var e=this.facadeMap_.getPanels("Catalog")[0].getControls()[0];if(e){for(var t=0;t<e.controls_.length;t++)"WFSManagerControl"===e.controls_[t].name&&(this.WFSManagerCtl=e.controls_[t]);return null!==this.WFSManagerCtl}return!1}},{key:"zoomToSandBox",value:function(e){this.manageSelectedClassInDropdown(e),this.entityLayer_.getFeatures().length>0?this.entityLayer_.zoomToFeatures(this.entityLayer_.getFeatures()):M.dialog.info(vt("dialog_noGeometry"),vt("dialog_zoom_title"))}},{key:"zoomToSelection",value:function(e){this.manageSelectedClassInDropdown(e),this.entityLayer_.selectedFeatures_.length>0?this.entityLayer_.zoomToFeatures(this.entityLayer_.selectedFeatures_):M.dialog.info(vt("dialog_removeFeatures_noGeometry"),vt("dialog_zoom_select"))}},{key:"getWfsFeatures",value:function(e){var t=this;e.preventDefault();var n=document.getElementsByClassName("m-mapea-container")[0];M.EditionSpinner.show(n);var o=this.WFSManagerCtl.getServiceActive(),r=this.impl_.getFeatureRequestBody(o,e.coordinate),i={jsonp:o.useProxy},a=(new XMLSerializer).serializeToString(r);M.proxy(o.useProxy),M.remote.post(o.url,a,i).then((function(e){if(M.proxy(!0),200===e.code)return Number(e.xml.documentElement.getAttribute("numberOfFeatures"))<1?(M.EditionSpinner.close(n),void M.dialog.info(vt("dialog_not_found")+o.description)):e.text;M.dialog.error(vt("dialog_cannot_consult"))})).then((function(e){var r=t.entityLayer_.readGML3Features(e);if(r.length>0){for(var i=0;i<r.length;i++)t.entityLayer_.addNewFeatureToSandBox(r[i]);M.EditionSpinner.close(n)}else M.EditionSpinner.close(n),M.dialog.info(vt("dialog_not_found")+o.description)})).catch((function(e){M.EditionSpinner.close(n),M.dialog.error(vt("dialog_cannot_consult"))}))}},{key:"deactiveControls",value:function(){this.insertGeomControl.deactivate(),this.insertTemporalGeomControl.deactivate(),this.modifyGeomControl.deactivate(),this.selectGeomControl.deactivate(),this.snappingControl.deactivate(),this.highlightControl.deactivate(),this.facadeMap_.getMapImpl().un("click",this.getWfsFeatures,this)}},{key:"unselectControls",value:function(){this.insertPolygonButton.className=this.insertPolygonButton.className.replace(" selected",""),this.addGeomButton.className=this.addGeomButton.className.replace(" selected",""),this.selectPolygonButton.className=this.selectPolygonButton.className.replace(" selected",""),this.selectPolygonByLineButton.className=this.selectPolygonByLineButton.className.replace(" selected",""),this.selectPolygonByAreaButton.className=this.selectPolygonByAreaButton.className.replace(" selected",""),this.modifyPolygonButton.className=this.modifyPolygonButton.className.replace(" selected",""),this.dividePolygonButton.className=this.dividePolygonButton.className.replace(" selected",""),this.intersectPolygonButton.className=this.intersectPolygonButton.className.replace(" selected",""),this.emptyPolygonButton.className=this.emptyPolygonButton.className.replace(" selected",""),this.removeFromSandBoxButton.className=this.removeFromSandBoxButton.className.replace(" selected","");for(var e=this.entityLayer_.selectedFeatures_,t=0;t<e.length;t++)e[t].getImpl().getOLFeature().setStyle(this.entityLayer_.getSelectedStyle());document.body.style.cursor="default"}},{key:"clear",value:function(){this.unselectControls(),this.deactiveControls()}},{key:"equals",value:function(e){var t=!1;return e instanceof M.control.EditionGeometryControl&&(t=this.name===e.name),t}},{key:"destroy",value:function(){this.getImpl().destroy()}}])&&Rt(t.prototype,n),o&&Rt(t,o),i}(yt);function qt(e){return(qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Jt(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Vt(e,t,n){return(Vt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ht(e)););return e}(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function Zt(e,t){return(Zt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ut(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Ht(e);if(t){var r=Ht(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Wt(this,n)}}function Wt(e,t){return!t||"object"!==qt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ht(e){return(Ht=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Xt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Zt(e,t)}(a,M.Control);var t,n,o,i=Ut(a);function a(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),M.utils.isUndefined(q)&&M.exception("La implementación usada no puede crear controles editionControl");var t=new q;return(e=i.call(this,t,"edition")).sandBoxLayer_=null,e}return t=a,(n=[{key:"createView",value:function(e){var t=this,n=this;return this.facadeMap_=e,new Promise((function(e,o){var i=M.template.compileSync(r.a,{vars:{translations:{import_btn:vt("import_btn"),select_btn:vt("select_btn"),select_click:vt("select_click"),select_line:vt("select_line"),select_area:vt("select_area"),select_all:vt("select_all"),deselect_all:vt("deselect_all"),zoom:vt("zoom"),zoom_sandbox:vt("zoom_sandbox"),zoom_selection:vt("zoom_selection"),geometry_draw:vt("geometry_draw"),snapping:vt("snapping"),modify_polygon:vt("modify_polygon"),geometry_divide:vt("geometry_divide"),union:vt("union"),empty_polygon:vt("empty_polygon"),intersection:vt("intersection"),delete_selected:vt("delete_selected")}}});n.element_=i,n.sandBoxLayer_=new f(t),n.createControls(),e(i)}))}},{key:"createControls",value:function(){this.highlightControl=new ne(this.facadeMap_,this.sandBoxLayer_),this.insertGeomControl=new ge(this.facadeMap_,this.sandBoxLayer_),this.modifyGeomControl=new Me(this.facadeMap_,this.sandBoxLayer_),this.insertTemporalGeomControl=new Ve(this.facadeMap_,this.sandBoxLayer_),this.snappingControl=new rt(this.facadeMap_,this.sandBoxLayer_),this.selectGeomControl=new I(this.facadeMap_,this.sandBoxLayer_),this.geomControl=new At(this)}},{key:"activate",value:function(){Vt(Ht(a.prototype),"activate",this).call(this)}},{key:"deactivate",value:function(){Vt(Ht(a.prototype),"deactivate",this).call(this),this.getImpl().deactivateClick(this.map_)}},{key:"getActivationButton",value:function(e){return e.querySelector(".m-edition button")}},{key:"destroyControls",value:function(){this.geomControl.clear(),this.sandBoxLayer_.destroy()}},{key:"equals",value:function(e){return e instanceof a}}])&&Jt(t.prototype,n),o&&Jt(t,o),a}(),Yt=n(4);function Kt(e){return(Kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qt(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function $t(e,t,n){return t&&Qt(e.prototype,t),n&&Qt(e,n),e}function en(e,t){return(en=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function tn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=on(e);if(t){var r=on(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return nn(this,n)}}function nn(e,t){return!t||"object"!==Kt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function on(e){return(on=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var rn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&en(e,t)}(n,M.Plugin);var t=tn(n);function n(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(e=t.call(this)).map_=null,e.controls_=[],e.position="TL",e.metadata_=Yt.metadata,e}return $t(n,null,[{key:"NAME",get:function(){return"edition"}}]),$t(n,[{key:"addTo",value:function(e){this.control_=new Xt,this.controls_.push(this.control_),this.map_=e,this.panel_=new M.ui.Panel("paneledition",{collapsible:!0,className:"m-edition",collapsedButtonClass:"g-editiontools-closed",openedButtonClass:"g-editiontools-opened-vertical",position:M.ui.position[this.position],tooltip:vt("tooltip")}),this.panel_.addControls(this.controls_),e.addPanels(this.panel_)}},{key:"getMetadata",value:function(){return this.metadata_}},{key:"getAPIRest",value:function(){return"".concat(this.name,"=").concat(this.position)}},{key:"destroy",value:function(){this.control_.destroyControls(),this.map_.removeControls([this.control_]),this.map_=null,this.control_=null,this.panel_=null}},{key:"equals",value:function(e){return e instanceof n}},{key:"name",get:function(){return"edition"}}]),n}();window.M.plugin||(window.M.plugin={}),window.M.plugin.Edition=rn}]);
//# sourceMappingURL=edition.ol.min.js.map